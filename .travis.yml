language: clojure
lein: 2.7.1
before_install:
  - mkdir -p $HOME/bin
  - wget https://github.com/github/git-lfs/releases/download/v1.1.2/git-lfs-linux-amd64-1.1.2.tar.gz
  - tar xvfz git-lfs-linux-amd64-1.1.2.tar.gz
  - mv git-lfs-1.1.2/git-lfs $HOME/bin/git-lfs
  - rm git-lfs-linux-amd64-1.1.2.tar.gz
  - export PATH=$PATH:$HOME/bin/
  - git-lfs pull
before_script:
  - npm install -g eclint
  - eclint check .* * src/**/*.clj test/**/*.clj
  - lein install
  - lein cljfmt check
script:
  - lein with-profile +dev cloverage --coveralls
after_success:
  - curl -F 'json_file=@target/coverage/coveralls.json' 'https://coveralls.io/api/v1/jobs'
jdk:
  - oraclejdk8
